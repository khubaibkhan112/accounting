import{_ as P,c as t,o as l,a as o,w as i,b as c,v as m,t as d,u as F,r as w,d as g,e as E,f as y}from"./app-DMusxX-K.js";const h={name:"Profile",setup(){const n=F(),s=w(!0),b=w(!1),r=w(!1),p=g({}),u=g({}),a=g({name:"",email:"",phone:""}),f=g({current_password:"",password:"",password_confirmation:""}),x=async()=>{s.value=!0;try{const e=await y.get("/api/profile");a.name=e.data.name||"",a.email=e.data.email||"",a.phone=e.data.phone||""}catch(e){console.error("Error loading profile:",e),n.error("Failed to load profile.")}finally{s.value=!1}},v=async()=>{b.value=!0,Object.keys(p).forEach(e=>delete p[e]);try{const e=await y.put("/api/profile",a);n.success(e.data.message||"Profile updated successfully.")}catch(e){e.response?.status===422&&e.response?.data?.errors?Object.assign(p,e.response.data.errors):n.error(e.response?.data?.message||"Failed to update profile.")}finally{b.value=!1}},k=async()=>{r.value=!0,Object.keys(u).forEach(e=>delete u[e]);try{const e=await y.put("/api/profile/password",f);n.success(e.data.message||"Password updated successfully."),f.current_password="",f.password="",f.password_confirmation=""}catch(e){e.response?.status===422&&e.response?.data?.errors?Object.assign(u,e.response.data.errors):n.error(e.response?.data?.message||"Failed to update password.")}finally{r.value=!1}};return E(()=>{x()}),{loading:s,savingProfile:b,savingPassword:r,profileForm:a,passwordForm:f,profileErrors:p,passwordErrors:u,saveProfile:v,changePassword:k}}},_={key:0,class:"text-center py-12"},U={key:1,class:"grid grid-cols-1 gap-6"},V={class:"bg-white shadow rounded-lg"},j={class:"px-4 py-5 sm:p-6 space-y-4"},C={key:0,class:"mt-1 text-sm text-red-600"},N={key:0,class:"mt-1 text-sm text-red-600"},O={key:0,class:"mt-1 text-sm text-red-600"},S={class:"flex justify-end"},B=["disabled"],D={class:"bg-white shadow rounded-lg"},M={class:"px-4 py-5 sm:p-6 space-y-4"},T={key:0,class:"mt-1 text-sm text-red-600"},L={key:0,class:"mt-1 text-sm text-red-600"},q={class:"flex justify-end"},z=["disabled"];function A(n,s,b,r,p,u){return l(),t("div",null,[s[17]||(s[17]=o("div",{class:"mb-6"},[o("h1",{class:"text-2xl font-bold text-gray-900"},"Profile"),o("p",{class:"mt-1 text-sm text-gray-500"},"Manage your account details and password")],-1)),r.loading?(l(),t("div",_,[...s[8]||(s[8]=[o("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),o("p",{class:"mt-2 text-sm text-gray-500"},"Loading profile...",-1)])])):(l(),t("div",U,[o("div",V,[s[12]||(s[12]=o("div",{class:"px-4 py-5 sm:p-6 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Profile Details"),o("p",{class:"mt-1 text-sm text-gray-500"},"Update your name and contact information")],-1)),o("div",j,[o("div",null,[s[9]||(s[9]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),i(o("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>r.profileForm.name=a),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[m,r.profileForm.name]]),r.profileErrors.name?(l(),t("p",C,d(r.profileErrors.name[0]),1)):c("",!0)]),o("div",null,[s[10]||(s[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),i(o("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=a=>r.profileForm.email=a),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[m,r.profileForm.email]]),r.profileErrors.email?(l(),t("p",N,d(r.profileErrors.email[0]),1)):c("",!0)]),o("div",null,[s[11]||(s[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone",-1)),i(o("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=a=>r.profileForm.phone=a),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[m,r.profileForm.phone]]),r.profileErrors.phone?(l(),t("p",O,d(r.profileErrors.phone[0]),1)):c("",!0)]),o("div",S,[o("button",{onClick:s[3]||(s[3]=(...a)=>r.saveProfile&&r.saveProfile(...a)),disabled:r.savingProfile,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},d(r.savingProfile?"Saving...":"Save Profile"),9,B)])])]),o("div",D,[s[16]||(s[16]=o("div",{class:"px-4 py-5 sm:p-6 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Change Password"),o("p",{class:"mt-1 text-sm text-gray-500"},"Update your account password")],-1)),o("div",M,[o("div",null,[s[13]||(s[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Current Password",-1)),i(o("input",{type:"password","onUpdate:modelValue":s[4]||(s[4]=a=>r.passwordForm.current_password=a),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[m,r.passwordForm.current_password]]),r.passwordErrors.current_password?(l(),t("p",T,d(r.passwordErrors.current_password[0]),1)):c("",!0)]),o("div",null,[s[14]||(s[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"New Password",-1)),i(o("input",{type:"password","onUpdate:modelValue":s[5]||(s[5]=a=>r.passwordForm.password=a),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[m,r.passwordForm.password]]),r.passwordErrors.password?(l(),t("p",L,d(r.passwordErrors.password[0]),1)):c("",!0)]),o("div",null,[s[15]||(s[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Confirm New Password",-1)),i(o("input",{type:"password","onUpdate:modelValue":s[6]||(s[6]=a=>r.passwordForm.password_confirmation=a),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[m,r.passwordForm.password_confirmation]])]),o("div",q,[o("button",{onClick:s[7]||(s[7]=(...a)=>r.changePassword&&r.changePassword(...a)),disabled:r.savingPassword,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},d(r.savingPassword?"Saving...":"Update Password"),9,z)])])])]))])}const H=P(h,[["render",A]]);export{H as default};
